# ============================================
# PRODUCTION CONFIGURATION - Holland Flowers
# For Render Deployment with Docker
# Domain: www.flowerskw.com
# ============================================

# Server Configuration
server.port=${PORT:8080}
server.servlet.context-path=/api/v1

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.file-size-threshold=2KB

# Spring Application
spring.application.name=Holland Flowers

# WebFlux Codec Configuration
spring.codec.max-in-memory-size=10MB

# ============================================
# DATABASE CONFIGURATION (Supabase PostgreSQL)
# ============================================
spring.datasource.url=${SUPABASE_DB_URL:jdbc:postgresql://aws-1-ap-south-1.pooler.supabase.com:5432/postgres?sslmode=require}
spring.datasource.username=${SUPABASE_DB_USERNAME:postgres.wauemillpmbgdyawbyfl}
spring.datasource.password=${SUPABASE_DB_PASSWORD:HollandFlowers@2025}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=30000

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.jpa.properties.hibernate.default_schema=holland_flower

# ============================================
# EMAIL CONFIGURATION (Gmail SMTP)
# ============================================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=hollandaflowers@gmail.com
spring.mail.password=Ram$55452341
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# Old SMTP2GO Configuration (DISABLED - DO NOT UNCOMMENT)
#spring.mail.host=mail.smtp2go.com
#spring.mail.port=2525
#spring.mail.username=hollandflowers.com
#spring.mail.password=OSNAOQLiij9wtGW6

# OWNER EMAIL - Where new order notifications will be sent
app.email.from=noreply@flowerskw.com
app.email.from-name=Holland Flowers
app.email.owner=hollandaflowers@gmail.com

# ============================================
# SUPABASE STORAGE CONFIGURATION
# ============================================
supabase.url=${SUPABASE_URL:https://wauemillpmbgdyawbyfl.supabase.co}
supabase.key=${SUPABASE_ANON_KEY:eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndhdWVtaWxscG1iZ2R5YXdieWZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzczOTI2NjgsImV4cCI6MjA1Mjk2ODY2OH0.EqzXH0p7HfVXTQKlPKMZxBXqK9vD_7cWQwx3VYqzKhI}
supabase.service-key=${SUPABASE_SERVICE_KEY:eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndhdWVtaWxscG1iZ2R5YXdieWZsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczNzM5MjY2OCwiZXhwIjoyMDUyOTY4NjY4fQ.QkH0qT3uBCZwpZuQ0z7bkPy5KMFKH1YHsQQqLWFyqpE}
supabase.storage-bucket=${SUPABASE_STORAGE_BUCKET:holland-flowers}

# ============================================
# JWT CONFIGURATION
# ============================================
jwt.secret=${JWT_SECRET:aG9sbGFuZGZsb3dlcnNzZWNyZXRrZXlmb3Jqd3R0b2tlbnNpZ25pbmcyMDI1}
jwt.expiration=${JWT_EXPIRATION:86400000}
jwt.refresh-expiration=${JWT_REFRESH_EXPIRATION:604800000}

# ============================================
# OTP CONFIGURATION
# ============================================
otp.expiry-minutes=${OTP_EXPIRY_MINUTES:5}
otp.length=${OTP_LENGTH:4}

# ============================================
# HESABE PAYMENT GATEWAY - PRODUCTION
# ============================================
hesabe.merchant-code=${HESABE_MERCHANT_CODE:129562425}
hesabe.access-code=${HESABE_ACCESS_CODE:70d835f1-e0e5-473d-8a37-8b1e67bfc36d}
hesabe.secret-key=${HESABE_SECRET_KEY:nDreP2JpOqEkaEEO4K7a0x9vXdWAGyL3}
hesabe.iv-key=${HESABE_IV_KEY:OqEkaEEO4K7a0x9v}

# PRODUCTION API URL
hesabe.base-url=${HESABE_BASE_URL:https://api.hesabe.com}

# API Endpoints
hesabe.checkout-endpoint=/checkout
hesabe.payment-status-endpoint=/payment/status

# Callback URLs - Backend receives callback, Frontend shows result
# HARDCODED to avoid env var issues
hesabe.success-url=https://www.flowerskw.com/payment/success
hesabe.failure-url=https://www.flowerskw.com/payment/failure
hesabe.response-url=https://hollandflowers.onrender.com/api/v1/payments/callback
hesabe.webhook-url=https://hollandflowers.onrender.com/api/v1/payments/webhook

# Default payment method (optional - leave empty to show all methods)
#hesabe.default-payment-method=

# PRODUCTION MODE
hesabe.sandbox-mode=false

# Timeouts
hesabe.connection-timeout=30000
hesabe.read-timeout=30000

# ============================================
# ACTUATOR (for health checks)
# ============================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always

# ============================================
# LOGGING CONFIGURATION
# ============================================
logging.level.root=WARN
logging.level.com.flowerapp=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ============================================
# SWAGGER/OPENAPI
# ============================================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha